<!DOCTYPE HTML>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Stephen J. Lu</title>
  <link rel="icon" type="image/x-icon" href="images/favicon.ico">
  <meta name="description" content="Author of CSI to CEO: What the Dead Can Teach Us About Life and Leadership" />
  <meta name="keywords" content="stephen,lu,forensic,leadership,training,center,csi,ceo,phi beta kappa" />

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>


  
  <style>
table {
  border-collapse: separate;
  border-spacing: 2px;
  width: 100%;
}

td {
  height: 10px;
  border: 1px solid #eee;
  border-radius: 4px;
}

.color-0 { background-color: #fff; }
.color-1 { background-color: #9be9a8; }
.color-2 { background-color: #40c463; }
.color-3 { background-color: #30a14e; }
.color-4 { background-color: #216e39; }
  </style>
</head>

<body>
  <table id="contribution-table">
    <!-- The table will be generated here -->
  </table>

  <script>
const username = "StephenJLu"; // Replace with your Github username
const accessToken = process.env.GITHUB_ACCESS_TOKEN; // Replace with your personal access token
const apiUrl = "https://api.github.com/graphql";

const query = `
  query {
    user(login: "${username}") {
      contributionsCollection {
        contributionCalendar {
          totalContributions
          weeks {
            contributionDays {
              contributionCount
              date
            }
          }
        }
      }
    }
  }
`;

fetch(apiUrl, {
  method: "POST",
  headers: {
    Authorization: `Bearer ${accessToken}`,
    "Content-Type": "application/json",
  },
  body: JSON.stringify({ query }),
})
  .then((response) => response.json())
  .then((data) => {
    const contributions = data.data.user.contributionsCollection.contributionCalendar;
    const weeks = contributions.weeks;

    // Create the table structure based on contributions data
    const contributionTable = document.getElementById("contribution-table");
    for (let dayOfWeek = 0; dayOfWeek < 7; dayOfWeek++) {
      const row = document.createElement("tr");
      for (let weekIndex = 0; weekIndex < 53; weekIndex++) {
        const week = weeks[weekIndex];
        const contributionDay = week.contributionDays[dayOfWeek];
        const contributionCount = contributionDay ? contributionDay.contributionCount : 0;
        const td = document.createElement("td");
        let contributionColor;
        if (contributionCount < 5) {
          contributionColor = 0;
        } else if (contributionCount < 10) {
          contributionColor = 1;
        } else if (contributionCount < 15) {
          contributionColor = 2;
        } else if (contributionCount < 20) {
          contributionColor = 3;
        } else {
          contributionColor = 4;
        }
        td.className = `color-${contributionColor}`;
        row.appendChild(td);
      }
      contributionTable.appendChild(row);
    }
  })
  .catch((error) => {
    console.error("Error fetching GitHub contributions:", error);
  });

  </script>
</body>

</html>